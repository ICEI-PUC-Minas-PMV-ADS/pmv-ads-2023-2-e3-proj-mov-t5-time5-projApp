{"ast":null,"code":"import { runOnUI } from \"../core\";\nexport var prepareUIRegistry = runOnUI(function () {\n  'worklet';\n\n  var frameCallbackRegistry = {\n    frameCallbackRegistry: new Map(),\n    activeFrameCallbacks: new Set(),\n    previousFrameTimestamp: null,\n    runCallbacks: function runCallbacks() {\n      var _this = this;\n      var loop = function loop(timestamp) {\n        if (_this.previousFrameTimestamp === null) {\n          _this.previousFrameTimestamp = timestamp;\n        }\n        var delta = timestamp - _this.previousFrameTimestamp;\n        _this.activeFrameCallbacks.forEach(function (callbackId) {\n          var callbackDetails = _this.frameCallbackRegistry.get(callbackId);\n          var startTime = callbackDetails.startTime;\n          if (startTime === null) {\n            callbackDetails.startTime = timestamp;\n            callbackDetails.callback({\n              timestamp: timestamp,\n              timeSincePreviousFrame: null,\n              timeSinceFirstFrame: 0\n            });\n          } else {\n            callbackDetails.callback({\n              timestamp: timestamp,\n              timeSincePreviousFrame: delta,\n              timeSinceFirstFrame: timestamp - startTime\n            });\n          }\n        });\n        if (_this.activeFrameCallbacks.size > 0) {\n          _this.previousFrameTimestamp = timestamp;\n          requestAnimationFrame(loop);\n        } else {\n          _this.previousFrameTimestamp = null;\n        }\n      };\n      if (this.activeFrameCallbacks.size === 1) {\n        requestAnimationFrame(loop);\n      }\n    },\n    registerFrameCallback: function registerFrameCallback(callback, callbackId) {\n      this.frameCallbackRegistry.set(callbackId, {\n        callback: callback,\n        startTime: null\n      });\n    },\n    unregisterFrameCallback: function unregisterFrameCallback(callbackId) {\n      this.manageStateFrameCallback(callbackId, false);\n      this.frameCallbackRegistry.delete(callbackId);\n    },\n    manageStateFrameCallback: function manageStateFrameCallback(callbackId, state) {\n      if (callbackId === -1) {\n        return;\n      }\n      if (state) {\n        this.activeFrameCallbacks.add(callbackId);\n        this.runCallbacks();\n      } else {\n        var callback = this.frameCallbackRegistry.get(callbackId);\n        callback.startTime = null;\n        this.activeFrameCallbacks.delete(callbackId);\n      }\n    }\n  };\n  global._frameCallbackRegistry = frameCallbackRegistry;\n});","map":{"version":3,"names":["runOnUI","prepareUIRegistry","frameCallbackRegistry","Map","activeFrameCallbacks","Set","previousFrameTimestamp","runCallbacks","_this","loop","timestamp","delta","forEach","callbackId","callbackDetails","get","startTime","callback","timeSincePreviousFrame","timeSinceFirstFrame","size","requestAnimationFrame","registerFrameCallback","set","unregisterFrameCallback","manageStateFrameCallback","delete","state","add","global","_frameCallbackRegistry"],"sources":["C:/Users/ggukg/ProjKevin/pmv-ads-2023-2-e3-proj-mov-t5-time5-projApp/src/node_modules/react-native-reanimated/lib/reanimated2/frameCallback/FrameCallbackRegistryUI.js"],"sourcesContent":["import { runOnUI } from '../core';\nexport const prepareUIRegistry = runOnUI(() => {\n    'worklet';\n    const frameCallbackRegistry = {\n        frameCallbackRegistry: new Map(),\n        activeFrameCallbacks: new Set(),\n        previousFrameTimestamp: null,\n        runCallbacks() {\n            const loop = (timestamp) => {\n                if (this.previousFrameTimestamp === null) {\n                    this.previousFrameTimestamp = timestamp;\n                }\n                const delta = timestamp - this.previousFrameTimestamp;\n                this.activeFrameCallbacks.forEach((callbackId) => {\n                    const callbackDetails = this.frameCallbackRegistry.get(callbackId);\n                    const { startTime } = callbackDetails;\n                    if (startTime === null) {\n                        // First frame\n                        callbackDetails.startTime = timestamp;\n                        callbackDetails.callback({\n                            timestamp,\n                            timeSincePreviousFrame: null,\n                            timeSinceFirstFrame: 0,\n                        });\n                    }\n                    else {\n                        // Next frame\n                        callbackDetails.callback({\n                            timestamp,\n                            timeSincePreviousFrame: delta,\n                            timeSinceFirstFrame: timestamp - startTime,\n                        });\n                    }\n                });\n                if (this.activeFrameCallbacks.size > 0) {\n                    this.previousFrameTimestamp = timestamp;\n                    requestAnimationFrame(loop);\n                }\n                else {\n                    this.previousFrameTimestamp = null;\n                }\n            };\n            // runCallback() should only be called after registering a callback,\n            // so if there is only one active callback, then it means that there were\n            // zero previously and the loop isn't running yet.\n            if (this.activeFrameCallbacks.size === 1) {\n                requestAnimationFrame(loop);\n            }\n        },\n        registerFrameCallback(callback, callbackId) {\n            this.frameCallbackRegistry.set(callbackId, {\n                callback: callback,\n                startTime: null,\n            });\n        },\n        unregisterFrameCallback(callbackId) {\n            this.manageStateFrameCallback(callbackId, false);\n            this.frameCallbackRegistry.delete(callbackId);\n        },\n        manageStateFrameCallback(callbackId, state) {\n            if (callbackId === -1) {\n                return;\n            }\n            if (state) {\n                this.activeFrameCallbacks.add(callbackId);\n                this.runCallbacks();\n            }\n            else {\n                const callback = this.frameCallbackRegistry.get(callbackId);\n                callback.startTime = null;\n                this.activeFrameCallbacks.delete(callbackId);\n            }\n        },\n    };\n    global._frameCallbackRegistry = frameCallbackRegistry;\n});\n"],"mappings":"AAAA,SAASA,OAAO;AAChB,OAAO,IAAMC,iBAAiB,GAAGD,OAAO,CAAC,YAAM;EAC3C,SAAS;;EACT,IAAME,qBAAqB,GAAG;IAC1BA,qBAAqB,EAAE,IAAIC,GAAG,CAAC,CAAC;IAChCC,oBAAoB,EAAE,IAAIC,GAAG,CAAC,CAAC;IAC/BC,sBAAsB,EAAE,IAAI;IAC5BC,YAAY,WAAAA,aAAA,EAAG;MAAA,IAAAC,KAAA;MACX,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAIC,SAAS,EAAK;QACxB,IAAIF,KAAI,CAACF,sBAAsB,KAAK,IAAI,EAAE;UACtCE,KAAI,CAACF,sBAAsB,GAAGI,SAAS;QAC3C;QACA,IAAMC,KAAK,GAAGD,SAAS,GAAGF,KAAI,CAACF,sBAAsB;QACrDE,KAAI,CAACJ,oBAAoB,CAACQ,OAAO,CAAC,UAACC,UAAU,EAAK;UAC9C,IAAMC,eAAe,GAAGN,KAAI,CAACN,qBAAqB,CAACa,GAAG,CAACF,UAAU,CAAC;UAClE,IAAQG,SAAS,GAAKF,eAAe,CAA7BE,SAAS;UACjB,IAAIA,SAAS,KAAK,IAAI,EAAE;YAEpBF,eAAe,CAACE,SAAS,GAAGN,SAAS;YACrCI,eAAe,CAACG,QAAQ,CAAC;cACrBP,SAAS,EAATA,SAAS;cACTQ,sBAAsB,EAAE,IAAI;cAC5BC,mBAAmB,EAAE;YACzB,CAAC,CAAC;UACN,CAAC,MACI;YAEDL,eAAe,CAACG,QAAQ,CAAC;cACrBP,SAAS,EAATA,SAAS;cACTQ,sBAAsB,EAAEP,KAAK;cAC7BQ,mBAAmB,EAAET,SAAS,GAAGM;YACrC,CAAC,CAAC;UACN;QACJ,CAAC,CAAC;QACF,IAAIR,KAAI,CAACJ,oBAAoB,CAACgB,IAAI,GAAG,CAAC,EAAE;UACpCZ,KAAI,CAACF,sBAAsB,GAAGI,SAAS;UACvCW,qBAAqB,CAACZ,IAAI,CAAC;QAC/B,CAAC,MACI;UACDD,KAAI,CAACF,sBAAsB,GAAG,IAAI;QACtC;MACJ,CAAC;MAID,IAAI,IAAI,CAACF,oBAAoB,CAACgB,IAAI,KAAK,CAAC,EAAE;QACtCC,qBAAqB,CAACZ,IAAI,CAAC;MAC/B;IACJ,CAAC;IACDa,qBAAqB,WAAAA,sBAACL,QAAQ,EAAEJ,UAAU,EAAE;MACxC,IAAI,CAACX,qBAAqB,CAACqB,GAAG,CAACV,UAAU,EAAE;QACvCI,QAAQ,EAAEA,QAAQ;QAClBD,SAAS,EAAE;MACf,CAAC,CAAC;IACN,CAAC;IACDQ,uBAAuB,WAAAA,wBAACX,UAAU,EAAE;MAChC,IAAI,CAACY,wBAAwB,CAACZ,UAAU,EAAE,KAAK,CAAC;MAChD,IAAI,CAACX,qBAAqB,CAACwB,MAAM,CAACb,UAAU,CAAC;IACjD,CAAC;IACDY,wBAAwB,WAAAA,yBAACZ,UAAU,EAAEc,KAAK,EAAE;MACxC,IAAId,UAAU,KAAK,CAAC,CAAC,EAAE;QACnB;MACJ;MACA,IAAIc,KAAK,EAAE;QACP,IAAI,CAACvB,oBAAoB,CAACwB,GAAG,CAACf,UAAU,CAAC;QACzC,IAAI,CAACN,YAAY,CAAC,CAAC;MACvB,CAAC,MACI;QACD,IAAMU,QAAQ,GAAG,IAAI,CAACf,qBAAqB,CAACa,GAAG,CAACF,UAAU,CAAC;QAC3DI,QAAQ,CAACD,SAAS,GAAG,IAAI;QACzB,IAAI,CAACZ,oBAAoB,CAACsB,MAAM,CAACb,UAAU,CAAC;MAChD;IACJ;EACJ,CAAC;EACDgB,MAAM,CAACC,sBAAsB,GAAG5B,qBAAqB;AACzD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}